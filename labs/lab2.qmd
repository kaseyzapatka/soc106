---
title: "Lab 2: Summary Statistics in R"
author: "Your Name Here"
date: today
format:
  html:
    toc: true
    code-fold: false
    embed-resources: true
---

## Setup Instructions

1.  Download `lab2.qmd` from bCourse under "labs" \> "Lab #2"
2.  Place `lab2.qmd` in your `labs` folder. Your folder structure should now look like this:

```         
soc106/
├── _quarto.yml
├── data/
│   └── attain.csv
├── assignments/
│   └── hw3.qmd
└── labs/
    ├── lab1.qmd
    └── lab2.qmd
```

3.  Use the `Explorer` button on the left to find and open `lab2.qmd`

4.  Let's work through it together!

------------------------------------------------------------------------

## Load Libraries and Data

First, load the tidyverse package:

```{r}
#| message: false
#| warning: false

# load libraries
library(tidyverse)
```

Today we'll use the `mpg` dataset, which is built into the tidyverse. It contains fuel economy data for 234 cars from 1999 to 2008. No need to download anything!

```{r}
# Preview the data
mpg |> glimpse()
```

------------------------------------------------------------------------

## Frequency Tables

The `count()` function tallies how many observations fall into each category. We can add a proportion column with `mutate()`.

```{r}
# Frequency table for vehicle class
mpg |>
  count(class) |>
  mutate(proportion = n / sum(n))
```

**Try it yourself:** Create a frequency table with proportions for the `drv` variable (drive type: f = front-wheel, r = rear-wheel, 4 = 4-wheel).

```{r}
# Your code here

```

------------------------------------------------------------------------

## Marginal Frequencies

We can calculate marginal (conditional) frequencies by filtering to a subgroup first, then counting.

```{r}
# Among SUVs, what is the distribution of drive type?
mpg |>
  filter(class == "suv") |>
  count(drv) |>
  mutate(proportion = n / sum(n))
```

**Try it yourself:** Among compact cars (`class == "compact"`), what is the distribution of drive type (`drv`)? What proportion are front-wheel drive?

```{r}
# Your code here

```

------------------------------------------------------------------------

## Central Tendency

We use `summarise()` (or `summarize()`) to calculate the mean and median. Remember to use `na.rm = TRUE` to handle missing values.

```{r}
# Mean and median highway mpg
mpg |>
  summarise(
    mean_hwy = mean(hwy, na.rm = TRUE),
    median_hwy = median(hwy, na.rm = TRUE)
  )
```

For the mode, we use `count()` and `slice_max()`:

```{r}
# Mode of manufacturer
mpg |>
  count(manufacturer) |>
  slice_max(n, n = 1)
```

**Try it yourself:** Calculate the mean and median of city fuel economy (`cty`). Then find the mode of the `class` variable.

```{r}
# Your code here

```

------------------------------------------------------------------------

## Dispersion: Percentiles

We use `quantile()` inside `summarise()` to calculate percentiles.

```{r}
# Percentiles for highway mpg
mpg |>
  summarise(
    p25 = quantile(hwy, 0.25),
    p50 = quantile(hwy, 0.50),
    p75 = quantile(hwy, 0.75)
  )
```

**Try it yourself:** Calculate the 10th, 50th, and 90th percentiles for city fuel economy (`cty`).

```{r}
# Your code here

```

------------------------------------------------------------------------

## Dispersion: Variance and Standard Deviation

We can calculate variance with `var()` and standard deviation with `sd()`.

```{r}
# Variance and standard deviation of highway mpg
mpg |>
  summarise(
    variance = var(hwy),
    std_dev = sd(hwy)
  )
```

**Try it yourself:** Calculate the variance and standard deviation of engine displacement (`displ`). Verify that the standard deviation equals the square root of the variance by also calculating `sqrt(var(displ))`.

```{r}
# Your code here

```

------------------------------------------------------------------------

## Association: Correlation

We can measure the linear association between two continuous variables using `cor()`.

```{r}
# Correlation between engine size and highway mpg
mpg |>
  summarise(
    correlation = cor(displ, hwy)
  )
```

A negative correlation means as engine size increases, fuel economy tends to decrease.

**Try it yourself:** Calculate the correlation between city fuel economy (`cty`) and highway fuel economy (`hwy`). Is the relationship positive or negative? Is it strong or weak?

```{r}
# Your code here

```

------------------------------------------------------------------------

## Putting It All Together

Let's combine what we've learned. We can calculate multiple summary statistics at once, and even compare across groups using `group_by()`.

```{r}
# Compare highway mpg across drive types
mpg |>
  group_by(drv) |>
  summarise(
    mean_hwy = mean(hwy),
    median_hwy = median(hwy),
    sd_hwy = sd(hwy),
    n = n()
  )
```

**Try it yourself:** Compare city fuel economy (`cty`) across vehicle classes (`class`). Calculate the mean, median, and standard deviation for each class. Which class has the best average fuel economy?

```{r}
# Your code here

```

------------------------------------------------------------------------

## Summary

In this lab, you practiced calculating summary statistics in R:

| Function             | Purpose                          |
|----------------------|----------------------------------|
| `count()`            | Frequency tables                 |
| `mutate()`           | Add proportions                  |
| `summarise()`        | Calculate summary statistics     |
| `mean()`, `median()` | Central tendency                 |
| `quantile()`         | Percentiles                      |
| `var()`, `sd()`      | Variance and standard deviation  |
| `cor()`              | Correlation coefficient          |
| `group_by()`         | Compare statistics across groups |

------------------------------------------------------------------------