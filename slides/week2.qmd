---
title: "Week 2"
subtitle: "Sociology 106: Quantitative Sociological Methods"
date: 01/27/2026
date-format: long
format:
  revealjs:
    slide-number: true
    chalkboard:
      buttons: false
    preview-links: auto
    css: slides.css
    footer: '[GitHub course repo](https://www.kaseyzapatka.com/soc106)'
---

## Housekeeping

**Office hours this week**

-   **Tuesdays**, 11:30 AM-1:00 PM, 444 Social Science Buliding
-   **Tuesdays**, 4:00 PM-4:30 PM, 444 Social Science Buliding
    -   Sign up at [https://www.wejoinin.com/kaseyzapatka\@berkeley.edu](https://www.wejoinin.com/kaseyzapatka@berkeley.edu){.uri}
-   If you can't make either, e-mail me and we'll find a time

[HW #1: due Thursday, February 5 by 11:59 PM]{.highlight}

## Learing Goals {.smaller}

1.  Gain some familiarity and basic proficiencywith R and Positron
2.  Understand core data concepts: variable types, logical operators, and common data structures
3.  Understand what the `Tidyverse` is and how it differs from base R
4.  Import, manipulate, and export data using fundamental R commands
5.  Prepare and submit homework assignments using [Quarto](https://quarto.org)

## Agenda {.smaller}

1.  Introduction to Positron IDE
2.  Working with Quarto **HW #0**: Setting up your folder structure and practicing with `.qmd` files
3.  R basics: variables, data types, and logical operators
4.  Data structures and file paths vectors and dataframes
5.  The Tidyverse and key functions
6.  **In-class Lab**: Practicing with the Tidyverse


## What is Positron? {.smaller}

**Positron** is an Integrated Development Environment (IDE)—essentially a wrapper to make working with a particular software more user-friendly.

::: {.fragment .fade-up}
::: columns
::: {.column width="50%"}
**An IDE provides:**

-   Run code with a simpler interface
-   Gives you a file browser 
-   Debugging tools
-   Version control (Git)
:::

::: {.column width="50%"}
**About Positron:**

-   Open-source (free to use)
-   Next-generation descendant of RStudio
-   Developed by Posit (creators of RStudio)
-   Designed for R and Python
:::
:::
:::

## Why Positron? {.smaller}

-   **Bilingual**: Work with R and Python in the same environment
-   **Modern**: Streamlined workflow for data science
-   **Easy extensions**: Add extensions for formatting, Git, Quarto, and more

Learn more: [Andrew Heiss' blog](https://www.andrewheiss.com/blog/2024/07/08/fun-with-positron/#my-extensions)

## Positron {.smaller}

::: columns
::: {.column width="20%"}
-   **Script pane:** Left Top
-   **Console pane:** Left Bottom
-   **Variables pane:** Right top
-   **Plot pane:** Right bottom
:::

::: {.column width="80%"}
![](images/week2/positron.png){width="100%,fig-align=\"center\""}
:::
:::

## Positron

Let's explore Positron together on your laptop:

::: incremental
-   File explorer
-   Console
-   Interpreter and Folder
-   New
-   Open
:::

## Why Quarto? {.smaller}

**Quarto (`.qmd`) files** let you combine code, output, and written analysis in one document. Check out [Quarto's website](https://quarto.org/docs/guide/) for more!

**Why I want you to use them for homework:**

-   **Show your work**: Code and results appear together—I can see exactly what you did
-   **Explain your thinking**: Add text to interpret results and answer questions
-   **Reproducible**: I can re-run your code to verify it works
-   **Professional skill**: This is how data scientists share analysis in the real world

## Anatomy of a `.qmd` File {.smaller .scrollable}

A `.qmd` file has **three main parts** and knits code + text together (unlike `.R` which runs code only):

::: columns
::: {.column width="50%"}
**1. YAML Header** (metadata)

``` yaml
---
title: "My Analysis"
author: "Your Name"
format: html
---
```
:::

::: {.column width="50%"}
**2. Markdown Text** (narrative)

Use `**bold**`, `*italics*`, `# Headings` to organize your script and write analyses in between code. 

[More markdown basics](https://quarto.org/docs/authoring/markdown-basics.html)
:::
:::

**3. Code Chunks** (analysis)

Insert `R` (or `python`) code directly in your analyses.

```{{{r}}}
data <- read_csv("data.csv")
summary(data)
```

## Rendering Quarto Documents {.smaller}

**What is Rendering?**

Rendering (or "knitting") converts your `.qmd` file into a finished document (HTML, PDF, or Word) by:

1.  Running all your R code chunks
2.  Combining code output with your text
3.  Formatting everything into your chosen output format

**How to Render**

-   Click the **"Preview"** button at the top of your .qmd file
-   Render on save so you can see all changes
-   I usually work with it open

## Rendering Quarto Documents {.smaller .scrollable}

**Source vs Visual Mode**

Positron provides two ways to edit `.qmd` files. Toggle between them using the buttons at the top-left of your editor.

<br>

::: panel-tabset

### Source

**Source,** which is the source actual code:

-   Shows raw markdown syntax
-   See the actual code: `**bold**`, `## Heading`
-   More control over formatting
-   Better for experienced users

![](images/week2/quarto_script2.png){width="100%,fig-align=\"center\""}

### Visual

**Visual,** which looks a lot like jupyter notebooks and allows you to edit code and text in a more interactive manner:

-   WYSIWYG editor (What You See Is What You Get)
-   Formatting toolbar (like Microsoft Word)
-   Live preview of how text will look
-   Easier for beginners

![](images/week2/quarto_script1.png){width="100%,fig-align=\"center\""}

:::

## Rendering Quarto Documents {.smaller}

**Which Should You Use?**

-   **Visual Mode**: Great when starting out or writing lots of text
-   **Source Mode**: Better for precise control and learning markdown

> Switch between them! Use Visual for writing, Source for troubleshooting. Just be sure to save when switching in between

## Rendering Quarto Documents {.smaller}

**Tips for making it work**

-   Save your .qmd file before rendering
-   All code must run without errors to render successfully
-   Check the "Render" tab for error messages if rendering fails

**Most common "knitting" errors:**

-   Quarto can't execute code
-   Code chunks have the same name

Should be fine if you don't do anything fancy and don't mess with quarto settings

## Practicing Quarto with HW #0 {.smaller}

::: columns
::: {.column width="60%"}
**Set up your folder:**

1.  Download `hw0.qmd`, `attain.csv`, and `_quarto.yml` from bCourse under "assignment" \> "HW #0"
2.  Create `soc106` folder on your desktop
3.  Create `data` and `assignments` folders inside
4.  Place files as shown:

```
soc106/
├── _quarto.yml
├── data/
│   └── attain.csv
└── assignments/
    └── hw0.qmd
```
:::

::: {.column width="40%"}
**Open in Positron:**

5.  Click `Open Folder` → navigate to `soc106`
6.  Trust the authors → click "Yes"
7.  Use `Explorer` button on left to find `hw0.qmd`
:::
:::

## Practicing Quarto with HW #0 {.smaller}

**Edit and render:**

8.  Uncomment rows 50 and 51 and click `Run Cell`
9.  Ensure packages downloaded correctly 
10. Replace "Karl Marx" with your name
11. Check `Render on Save`
12. Save and hit "Preview"
13. SUCCESS if you see your name!
14. Upload `.qmd` and `.html` to bCourses


## Writing with `script.R` {.smaller .scrollable}

::: incremental
**Best practice to write all code in a script file**

-   Reproducible code
-   Documents exactly what you have done
-   Allows you to easily correct mistakes

**Two types of files we'll work with**

-   **R files (`.R`):** accept R code and are very similar to text files except that they read R code.
-   **Quarto files (`.qmd`):** allow to intersperse R/Python (other languages too!) with text. It's great for putting text next to analysis.
:::

## Writing with `script.R` {.smaller}

Use a **hashtag (`#`)** at the start of lines in your script to tell R not to run that line

-   Useful for making comments about what your code is doing:
-   Helps you remember what you did
-   Helps others (like me, reading your homework) see what you were doing

Check out this example:

``` {.r code-line-numbers="3"}
#| eval: false
#| echo: true
# load data
census_data <- read_csv("data/acs2021.csv")
```

## Variable assignment in `script.R` {.smaller}

R is an ***object-oriented programming language***, meaning you can create new objects from any type of value, store it R's memory, and call it when necessary

-   Define variables using the assignment operator: `<-`
-   Give variables meaningful names when assigning
-   Variable names must be unique—reusing a name will overwrite it

``` {.r code-line-numbers="4|5"}
#| eval: false
#| echo: true
# load data
acs <- read_csv("data/acs2021.csv")
acs <- read_csv("data/acs2022.csv")
```

## Variable types {.smaller .scrollable}

| Type | Description | Examples |
|------|-------------|----------|
| **Numeric** | Real numbers; supports math operations (`+`, `-`, `*`, `/`) | `3`, `4.5`, `8.98443` |
| **Character** | Text; always in quotation marks | `"Welcome!"`, `"foo"` |
| **Boolean** | Logical values; R stores as 1 (`TRUE`) or 0 (`FALSE`) | `TRUE`, `FALSE` |

::: panel-tabset

### Numeric

```{r echo=TRUE}
a <- 10
b <- 3
a + b
a * b
```

### Character

```{r echo=TRUE}
first_name <- "John"
last_name <- "Doe"
paste(first_name, last_name)
```

### Boolean

```{r echo=TRUE}
# R treats TRUE as 1, FALSE as 0
is_enrolled <- TRUE
has_laptop <- FALSE
sum(is_enrolled, has_laptop)
```

:::

## Logical operators {.smaller}

-   Use logical operators to compare two variables or objects
-   Useful for manipulating data

::: panel-tabset

### Operators

| Operator | Meaning                  |
|----------|--------------------------|
| `==`     | Equal to                 |
| `!=`     | Not equal to             |
| `<`      | Less than                |
| `>`      | Greater than             |
| `<=`     | Less than or equal to    |
| `>=`     | Greater than or equal to |

### Example

```{r echo=TRUE}
x <- 10
y <- 5

x == y
x != y
x > y
x < y
x >= 10
```

:::

## Questions?

## Data structures {.smaller}

Data structures are simply collections of the data objects we have been working with:

-   Numeric
-   Character
-   Boolean variables

While there are many types of data structures in R, we will focus on two for our purposes: the **vector** and the **dataframe**

## Vectors {.smaller}

Vectors are ordered collections of the same type of objects

-   **Ordered**: position matters
-   **Same type**: e.g., can't mix numeric and character

We create vectors using the `c()` operator:

```{r echo=TRUE}
# Numeric vector
ages <- c(22, 25, 19, 30)

# Character vector
names <- c("Alice", "Bob", "Charlie", "Diana")
```

The `c()` operator works on already-existing vectors as well as variables (if of same type)

## Vectors {.smaller}

Use bracket notation to access individual elements: `vector[i]`

```{r echo=TRUE}
# create a vector of values
ages <- c(22, 25, 19, 30)

# Get the first element (indexing starts at 1)
ages[1]

# Get the third element
ages[3]

# Get multiple elements
ages[c(1, 3)]
```

## Dataframes {.smaller}

A dataframe is a list of equal-length vectors. We'll focus on **tidy dataframes**, which organize data so that:

-   Each **column** is a variable
-   Each **row** is an observation

```{r echo=FALSE, message=FALSE}
library(tidyverse)

students <- tibble(
  Observation = c("Obs1", "Obs2", "Obs3"),
  name = c("Alice", "Bob", "Charlie"),
  age = c(22, 25, 19),
  enrolled = c(TRUE, TRUE, FALSE),
)
students
```

## Inspecting dataframes {.smaller}

-   `glimpse()`: view data and summary info of dataframe
-   `head()`: looks at first few observations (similar to `print()`)
-   `str()`: returns structure of dataframe
-   `colnames()`: returns column names

::: panel-tabset


### glimpse()

```{r echo=TRUE}

glimpse(students)
```

### head()

```{r echo=TRUE}

head(students)
```

### str()

```{r echo=TRUE}
str(students)

```

### colnames()

```{r echo=TRUE}
colnames(students)

```
:::


## File paths and the `here` package {.smaller}

To load data, R needs to know where to look—but file paths break across different computers/operating systems.

The [`here`](https://here.r-lib.org) package solves this by **building paths relative to your project root (home folder of the project)**.

::: panel-tabset

### The Problem

```{r eval=FALSE, echo=TRUE}
# These break on different computers:
read_csv("C:\Users\YourName\Documents\project\data\mydata.csv") # windows
read_csv("~/Desktop/project/data/mydata.csv")                   # mac
```

### The Solution

```{.r eval=FALSE, echo=TRUE, code-line-numbers="1|4|8|11"}
library(here)

# here() finds your project root and builds paths from there
here()  # check where here thinks your project root is

# Loading data
#data <- read_csv("~/Desktop/project/data/raw/mydata.csv")     
data <- read_csv(here("data", "raw", "mydata.csv"))

# Saving data
write_csv(results, here("output", "results.csv"))
```

:::

## The `Tidyverse` {.smaller}

**What is it?**

-   A [**collection of R packages**](https://tidyverse.org) designed for data science that share a common philosophy and grammar
-   By far the most common approach to working with R
-   Most intuitive way to do data science

**Core Packages we'll be using**

-   [**readr**](https://readr.tidyverse.org): for importing data (`read_csv()`)
-   [**dplyr**](https://dplyr.tidyverse.org): for manipulating data (`filter()`, `select()`, `mutate()`, `summarize()`)
-   [**ggplot2**](https://ggplot2.tidyverse.org): for data visualization

## The `Tidyverse` {.smaller}

**Key Features**

-   **Consistent syntax**: functions work similarly across packages
-   **Human-readable**: code reads like sentences
-   **Pipe operator** `|>`:[^Pipe] chains functions together for readable code

[^Pipe]: The older version of the pipe operator `%>%` also works interchangeably.

``` {.r code-line-numbers="5|9"}
# |eval=FALSE
# |echo=TRUE

# Base R
mean(subset(dataframe, age > 18)$score)

# Tidyverse - "take dataframe, filter where age > 18,
# then pull score, then calculate mean"
dataframe |> filter(age > 18) |> pull(score) |> mean()
```

## The `Tidyverse` {.smaller}

How the packages work together

``` {.r code-line-numbers="5|8-12"}
# |eval=FALSE
# |echo=TRUE

# Load data
data <- read_csv("data.csv") # read in csv

# Process
data |>
  filter(year == 2020) |>  # filter rows based on conditions
  select(name, score)  |>  # select specific columns
  arrange(desc(score)) |>  # order columns
  glimpse()                # glimpse
```

## Key functions {.smaller .scrollable}

| Tidyverse Function | Purpose                     | Example                          |
|--------------------|--------------------------|--------------------------|
| `read_csv()`       | Import CSV data             | `read_csv("data.csv")`           |
| `glimpse()`        | Preview dataframe structure | `df |> glimpse()`                |
| `colnames()`       | Get column names            | `colnames(df)`                   |
| `select()`         | Choose columns              | `df |> select(name, age)`        |
| `filter()`         | Choose rows by condition    | `df |> filter(age > 20)`         |
| `slice()`          | Choose rows by position     | `slice(df, 1:10)`                |
| `arrange()`        | Sort rows                   | `arrange(df, desc(age))`         |
| `mutate()`         | Create/modify columns       | `df |> mutate(age_2x = age * 2)` |
| `rename()`         | Rename columns              | `df |> rename(new = old)`        |

## Questions?

## Tidyverse in Practice (in-class Lab) {.smaller}

Let's practice using the folder structure you already set up:

1.  Download `lab1.qmd` from bCourse under "assignments" \> "Lab #1"
2.  Create a `labs` folder inside your `soc106` folder
3.  Place `lab1.qmd` in the `labs` folder. Your folder structure should now look like this:

```
soc106/
├── _quarto.yml
├── data/
│   └── attain.csv
├── assignments/
│   └── hw0.qmd
└── labs/
    └── lab1.qmd
```

4. Use the `Explorer` button on the left to find and open `lab1.qmd`
5. Let's work through it together!

## Homework #1 {.smaller}

For this week only, I will provide a dataset for you to use on your homework assignment

-   **attain.csv**: data from the General Social Survey
-   in bCourses, Assignments → HW# 1

**Turn in your assignment on bCourses**

-   [**HW #1:** due Tuesday, February 10, 11:59 PM](https://bcourses.berkeley.edu/courses/1551992/assignments/9023060)
-   Turn in **BOTH** `hw1.qmd` and `hw1.html` files
-   Write code and text response intermittenly in file

# Appendix {.smaller visibility="uncounted"}

## Other data types {.smaller visibility="uncounted"}

You can also load Excel files into R

First, load the [`readxl`](https://readxl.tidyverse.org) package:

```{r eval=FALSE, echo=TRUE}
library(readxl)
```

Then, use the `read_excel` function:

```{r eval=FALSE, echo=TRUE}
# load
data <- read_excel("file_name.xlsx")
```

In fact, R can import all types of data files

Googling "import SAS/STATA/SPSS files into R" will point you in the right direction

## Some helpful R commands {.smaller visibility="uncounted"}

-   `?[function_name]` brings up a help page
-   `??[function_name]` will (sometimes) lead to helpful examples of how to use the function
-   `ls()` lists all objects in the global environment
-   `rm(object_name)` removes an object
-   `rm(list=ls())` removes all objects

## Want to know more R? {.smaller visibility="uncounted"}

Lecture and lab are based on the first two RFundamentals classes, which are run at the [D-Lab](https://dlab.berkeley.edu/home)

-   **D-Lab trainings**: <https://dlab.berkeley.edu/training>
    -   If you want to see the RFundamentals class notes: <https://github.com/dlab-berkeley/R-Fundamentals>
    -   [R Data Visualization workshop](https://dlab.my.salesforce-sites.com/events/event/home/rdatavis20260211) on Feb 11, 2026
-   Otherwise: Google is your friend!



## `.R` vs `.qmd` Files {.smaller}

So to summarize `.R` and `.qmd` scripts:

| Feature      | `.R` Script              | `.qmd` Document                          |
|-------------------|------------------------|-----------------------------|
| **Purpose**  | Run code                 | Create reports                           |
| **Content**  | Code only                | Code + text + output                     |
| **Output**   | Console results          | Formatted document (e.g., HTML/PDF/Word) |
| **Comments** | `# comment`              | Full markdown formatting                 |
| **Best for** | Data cleaning, functions | Analysis reports, presentations, hw      |



## Rendering Quarto Documents {.smaller}

**Output Formats**

For this course, make sure `html` is specified in your YAML header:

``` yaml
---
title: "My Analysis"
format: html        # or pdf, docx
---
```

Can format many different formats (e.g., pdf, docx, odt, epubs, pptx)
