---
title: "Week 3"
subtitle: "Sociology 106: Quantitative Sociological Methods"
date: 02/03/2026
date-format: long
format:
  revealjs: 
    slide-number: true
    chalkboard: 
      buttons: false
    preview-links: auto
    css: slides.css
    footer: '[GitHub course repo](https://www.kaseyzapatka.com/soc106)'
---


```{r}
#| echo: false
#| results: false

# code for lecture
# ---------

# load tidyverse
library(tidyverse)
library(here)

# load attain library
attain <- read_csv(here("data/attain.csv")) 

```


## Housekeeping {.smaller}

**Weekly assignments**

-   Due on Thursdays nights (_except for hw1_)
-   Generally, if a couple of things not quite right → still full credit. If more than a couple → half credit
-   Each assignment is only 3% of your grade, and lowest grade over the course of the semester is dropped
-   But, multiple assignments not turned in will negatively affect your grade!

**HW #1:** due Tuesday, February 10, 11:59 PM -- _Extended deadline_
 - any questions?

## Learning goals {.smaller}

1. Identify and distinguish between different variable types (ratio, interval, ordinal, nominal)
2. Create and customize appropriate figures for different data types using ggplot2
3. Evaluate which visualization methods best communicates specific data patterns
4. Start thinking about where to get data for final paper

## Agenda {.smaller}

- Getting data to use in future weekly assignments and your final paper
- Visualizing data using ggplot
- Weekly assignments example 

## What type of data? {.smaller}

**We want data that will help us say something about sociological theories / social processes**

This encompasses a wide variety of data!

-   Our observations can be individuals, groups/organizations, countries
-   We will want to focus on topics that sociologists care about
-   But, fortunately for you, we care about almost everything!

**Not sure if your data source/topic is appropriate?**

Feel free to ask!

## Getting data: online repositories {.smaller}

Online repositories contain multiple datasets, and you can generally search for datasets related to your topic of interest

**Features:**

-   Some repositories need a UC Berkeley login
-   Some repositories allow you to do some data analysis on the webpage without accessing the raw data
-   **For this class**: we will want to download the raw data and work with it in R (importing it from .csv or from another data type if necessary)

## Data repositories {.smaller .scrollable}

| Repository | Focus | URL |
|------------|-------|-----|
| **SDA Berkeley** | Opinion data (GSS, ANES, racial attitudes) | [sda.berkeley.edu](https://sda.berkeley.edu/archive.htm) |
| **ICPSR** | Comprehensive social science | [icpsr.umich.edu](https://www.icpsr.umich.edu/sites/icpsr/find-data) |
| **ARDA** | Religion, health, public opinion | [thearda.com](https://thearda.com) |
| **IPUMS** | Census, CPS, health, time use | [ipums.org](https://www.ipums.org) |
| **Roper Center** | Public opinion polls | [ropercenter.cornell.edu](https://ropercenter.cornell.edu/) |
| **CEIC** | Economic data | [ceicdata.com](https://www.ceicdata.com/en) |
| **Google Dataset Search** | General search tool | [datasetsearch.research.google.com](https://datasetsearch.research.google.com/) |

## Government data {.smaller}

| Level | Focus | URL |
|-------|-------|-----|
| **Federal** | Health, education, climate, agriculture | [data.gov](https://www.data.gov/) |
| **California** | State demographics, economy, environment | [data.ca.gov](https://data.ca.gov/) |
| **San Francisco** | City services, transportation, housing | [datasf.org](https://datasf.org/) |
| **Berkeley** | Local permits, public works, demographics | [data.cityofberkeley.info](https://data.cityofberkeley.info/) |

## Questions?

## Visualizing data {.smaller}

**Most important first step in analyzing data is to take a close look at the data itself**

An easy way to take a close look at the data is to visualize it with a figure:

-   How variables are distributed—that is, what values our variables have across all observations
-   How the values of variables change over time
-   How the values of one variable are related to the values of another variable

## Review: levels of measurement {.smaller}

Four common levels of measurement we use in data analysis.

| Level | Key Property | Examples | Type |
|-------|--------------|----------|------|
| **Ratio** | True zero point | Age, income, years of education | Continuous |
| **Interval** | Equal distances, no true zero | IQ, SAT scores, SES | Continuous |
| **Ordinal** | Ordered categories | Letter grades, liberal-conservative | Categorical |
| **Nominal** | Unordered categories | Gender, religion, political party | Categorical |

**Why this matters:** How we visualize a variable depends on its level of measurement


## Basics of a `ggplot` plot {.smaller}

[`ggplot`](https://ggplot2.tidyverse.org/articles/ggplot2.html) follows the grammar of graphics. Every plot builds up from three components: **data**, **mapping**, and **layers**. Let's look at an example:

::: panel-tabset

### 1. Data

Start with your dataframe and `ggplot()`. This creates an empty canvas.

```{r}
#| echo: true
#| output-location: column

ggplot(data = mpg)
```

### 2. Mapping

Add `aes()` to connect columns to visual properties (x, y, color). Now we have axes.

```{r}
#| echo: true
#| output-location: column

ggplot(mpg, aes(x = cty, y = hwy))
```

### 3. Add a Layer

Add a `geom_point()` to display the data as points. Use `+` to add layers.

```{r}
#| echo: true
#| output-location: column

ggplot(mpg, aes(cty, hwy)) +
  geom_point() 
```


### 4. Add another layer

Add a `geom_smooth()` to run a regression line through the points

```{r}
#| echo: true
#| output-location: column

ggplot(mpg, aes(cty, hwy)) +
  geom_point() +
  geom_smooth(formula = y ~ x, method = "lm")
```

:::


## Visualizing variables{.smaller}

Which data visualization should you use with which combinations of variables?

| # of Variables | Variable Type | Visualization |
|-----------|------|---------------|
| **1** | Categorical | Bar chart |
| **1** | Continuous | Histogram, Density plot, Box plot |
| **2** | Continuous by Continuous | Line chart (over time) |
| **2** | Continuous by Continuous | Scatterplot |
| **2** | Continuous by Categorical | Boxplot |


## Bar charts: geom_bar(){.smaller}

For **categorical** (nominal or ordinal) variables, we can visualize their distribution in a dataset using a bar chart.

::: {.panel-tabset}

### What is a bar chart?

-   A graph of a frequency table
-   Height of bars indicates the relative frequency of values in our dataset
-   **X axis**: a series of categories
-   **Y axis**: absolute frequency of values
-   We can do this using the `geom_bar()` function


### `geom_bar()`

 
Frequency of marital status in attain:

```{r}
#| echo: true
#| output-location: column

ggplot(data = attain, aes(x = marital)) +
  geom_bar(fill = "#0d467cff") +
  labs(
    title = "Marital Status Distribution",
    x = "Marital Status",
    y = "Count"
  ) + 
  theme_minimal()

```

:::

## Histogram: geom_histogram(){.smaller}

For **continuous** (interval or ratio) variables, we can visualize their distribution in a dataset using a **histogram**.

::: {.panel-tabset}

### What is a histogram?

-   A graph in which a continuous variable is divided into categorical values
-   Frequencies shown in a bar graph
-   We can do this using the `geom_histogram()` function

### `geom_histogram()`

 R will automatically 'bin' a continuous variable into groups and then plot their frequency.

 It defaults to 30.

```{r}
#| echo: true
#| output-location: column

ggplot(data = attain, aes(x = age)) +
  geom_histogram(fill = "#0d467cff") +
  labs(
    title = "Age Distribution",
    x = "Age",
    y = "Frequency"
  ) + 
  theme_minimal()

```


### `bins()`

You can override `geom_histogram()`'s default by specifying the number of `bins()`. Here we set it to `100`.

``` {r}
#| echo: true
#| output-location: column

ggplot(data = attain, aes(x = age)) +
  # set bins to 100
  geom_histogram(bins = 100, fill = "#7B2C2F") +
  labs(
    title = "Age Distribution",
    x = "Age",
    y = "Frequency"
  ) + 
  theme_minimal()

```


### `binwidth()`

Alternatively, you can make the bins wider to include more observations. Here, we set the `binwidth = 50`, which makes the bins span 50 units. 

``` {r}
#| echo: true
#| output-location: column

ggplot(data = attain, aes(x = age)) +
  # set binwidth to 50
  geom_histogram(binwidth = 50, fill = "#4CBB17") +
  labs(
    title = "Age Distribution",
    x = "Age",
    y = "Frequency"
  ) + 
  theme_minimal()

```
:::


## Line chart: geom_line(){.smaller}

A **line chart** is similar to a bar graph but the tops of the bars are represented by points joined by lines. 

::: {.panel-tabset}

### What is a line chart?

- X and Y variables are ordered in some way (ordinal, interval, ratio)
- Useful when you want to show change in a `Y` variable over your `X` variable
- May not work well with missing values
- We can do this using the `geom_line()` function

### `geom_line()`

Here's a look at unemployment rates over time. Note that if we have data where we have average values of `Y` for ordered values of `X`, we can also use line charts.

```{r}
#| echo: true
#| output-location: column

economics |> 
ggplot(aes(x = date, y = unemploy)) + 
geom_line() + 
  labs(
    title = "Employment over time",
    x = "Date",
    y = "Unemployment count"
  ) + 
  theme_minimal()

```

:::


## Scatterplot: geom_point(){.smaller}

A **scatterplot** is a two-dimensional rectangular plot for visualizing the relationship between two continuous variables.


::: {.panel-tabset}

### What is a scatterplot?

- **X-axis**: values of one continuous variable
- **Y-axis**: values of another continuous variable
- We can do this using the `geom_point()` function


### `geom_point()`

Let's look at the relationship between the age at which an individual was married and the age when their child was born. 

```{r}
#| echo: true
#| output-location: column

attain |> 
ggplot(aes(x = agewed, y = agekdbrn)) + 
geom_point() + 
  labs(
    title = "Age of marriage vs childbirth",
    x = "Age married",
    y = "Age child was born"
  ) + 
  theme_minimal()

```

:::


## Boxplot: geom_boxplot(){.smaller}

The **boxplot** compactly displays the distribution of a continuous variable. It visualises five summary statistics (the median, two hinges and two whiskers), and all "outlying" points individually.

::: {.panel-tabset}

### What is a boxplot?

Most useful to see the entire distribution of a variable, by another categorical one

- Most useful looking at 2 vars
- We can do this using the `geom_boxplot()` function

### `geom_boxplot()` 

In this case, we are looking at the distribution of income by sex.

```{r}
#| echo: true
#| output-location: column

attain |> 
ggplot(aes(x = sex, y = rincom91)) + 
geom_boxplot() + 
  labs(
    title = "Income by sex",
    x = "Sex",
    y = "Income"
  ) + 
  theme_minimal()

```
::: 

## Questions?

## Weekly Assignment Example {.smaller}

You'll be provided a `hw#.qmd` each week that you'll use as a template to complete your homework assignment. It will be available in bCourses under the "Assignments" folder for that week

Some weeks you'll just answer specific questions, but in weeks that require you to use your own data, you'll approach the assignment like a research paper, which you can use to build into the final paper. 

Let's look at an example to better understand what I'm asking.


## Weekly Assignment #2 {.smaller}

**Assignment:**

Using a dataset of your choice, choose a research question and construct a plot that helps answer it.

**HW #2:** due Thursday, February 12, 11:59 PM

 - any questions?

## Paper Proposal (5%) {.smaller}

A **two-page double-spaced proposal** for your final paper is due on bCourses by **Thursday, February 26 at 11:59 PM**.

**Your proposal should include:**

1. **Research question** - What are you trying to answer?
2. **Why it matters** - Why should we care about this question?
3. **Hypotheses** - What do you think the answer is, and why?
4. **Data source** - What dataset will you use?
5. **Key variables** - Identify your independent and dependent variables

*Note: You do not need to discuss statistical techniques at this point.*
