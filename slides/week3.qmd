---
title: "Week 3"
subtitle: "Sociology 106: Quantitative Sociological Methods"
date: 02/03/2026
date-format: long
format:
  revealjs: 
    slide-number: true
    chalkboard: 
      buttons: false
    preview-links: auto
    #logo: berkeley_logo.png
    css: slides.css
    footer: '[GitHub course repo](https://www.kaseyzapatka.com/soc106)'
---


```{r}
#| echo: false
#| results: false

# code for lecture
# ---------

# load tidyverse
library(tidyverse)
library(here)

# load attain library
attain <- read_csv(here("data/attain.csv")) 

```


## Housekeeping {.smaller}

**Weekly assignments**

-   Due on Thursdays nights
-   Generally, if a couple of things not quite right → still full credit. If more than a couple → half credit
-   Each assignment is only 3% of your grade, and lowest grade over the course of the semester is dropped
-   But, multiple assignments not turned in will negatively affect your grade!

**HW #1:** due Thursday, February 5, 11:59 PM
 - any questions?


## Agenda {.smaller}

- Visualizing data
    - Bar charts
    - Histograms
    - Line charts
    - Scatterplots
    - Box plots
- Weekly assignments formatting 
- Questions about Quarto
- Getting data to use in future weekly assignments and your final paper

## Visualizing data {.smaller}

**Most important first step in analyzing data is to take a close look at the data itself**

An easy way to take a close look at the data is to visualize it with a figure:

-   How variables are distributed—that is, what values our variables have across all observations
-   How the values of variables change over time
-   How the values of one variable are related to the values of another variable

## Review: levels of measurement {.smaller}

**Four types of variables:**

-   **Nominal variables**: values (or attributes) are unordered categories
-   **Ordinal variables**: values have an ordering, but we can't measure distance between them
-   **Interval variables**: values have an ordering, and we can measure distance between them
-   **Ratio variables**: interval variables with a true 'zero point'

## Review: levels of measurement {.smaller}

| Level | Key Property | Examples |
|-------|--------------|----------|
| **Ratio** | True zero point | Age, income, years of education |
| **Interval** | Equal distances, no true zero | Test scores (IQ, SAT), SES |
| **Ordinal** | Ordered categories | Letter grades, liberal-conservative |
| **Nominal** | Unordered categories | Gender, religion, political party |

## Review: levels of measurement {.smaller}

**Simplified classification:**

We can think of nominal and ordinal variables as **categorical**, and interval and ratio variables as **continuous**.

**Why this matters for visualization:**

How we visualize a variable (or the relationship between two variables) will depend on their levels of measurement

## Basics of a `ggplot` plot {.smaller}

[`ggplot`](https://ggplot2.tidyverse.org/articles/ggplot2.html) follows the grammar of graphics, which needs **data**, a **mapping**, and a **layer** to make a figure



::: panel-tabset

## data

To begin you need data, preferably a dataframe and the `ggplot()` function to signal you will make a plot. 

`data` is always the first argument, but I like to pipe it in using ` |> `

```{.r}
ggplot(data = mpg)

```

## mapping

the `mapping` is a ‘dictionary’ to translate data to the graphics system and uses `aes()`. Here `cty` is mapped to the x-axis and `hwy` is mapped to the y-axis

```{.r}
ggplot(mpg, mapping = aes(x = cty, y = hwy))

```

## layer 

There are 3 basic types of layers, but the most important by far is a `geometry`, which determines how data are displayed, such as points, lines, or rectangles. 

`geom_point()` makes a scatterplot while `geom_smooth()` overlays a regression line. 

The `+` allows you to add new layers

```{.r}
ggplot(mpg, aes(cty, hwy)) +
  # to create a scatterplot
  geom_point() +
  # to fit and overlay a loess trendline
  geom_smooth(formula = y ~ x, method = "lm")

```
::: 


## Putting it all together!{.smaller}


Let's put it all together and see what it looks like!


```{r}
#| echo: true
#| output-location: column

ggplot(mpg, aes(cty, hwy)) +
  # to create a scatterplot
  geom_point() +
  # to fit and overlay a loess trendline
  geom_smooth(formula = y ~ x, method = "lm")
```


## Visualizing variables{.smaller}

| # of Variables | Variable Type | Visualization |
|-----------|------|---------------|
| **1** | Categorical | Bar chart |
| **1** | Continuous | Histogram, Density plot, Box plot |
| **2** | Continuous by Continuous | Line chart |
| **2** | Continuous by Continuous | Scatterplot |


## Bar charts: geom_bar(){.smaller}

For **categorical** (nominal or ordinal) variables, we can visualize their distribution in a dataset using a bar chart.

::: {.panel-tabset}

### What is a bar chart?

-   A graph of a frequency table
-   Height of bars indicates the relative frequency of values in our dataset
-   **X axis**: a series of categories
-   **Y axis**: absolute frequency of values
-   We can do this using the `geom_bar()` function


### `geom_bar()`

 
Frequency of marital status in attain:

```{r}
#| echo: true
#| output-location: column

ggplot(data = attain, aes(x = marital)) +
  geom_bar(fill = "#0d467cff") +
  labs(
    title = "Education Distribution",
    x = "Education Level",
    y = "Count"
  ) + 
  theme_minimal()

```

:::

## Histogram: geom_histogram(){.smaller}

For **continuous** (interval or ratio) variables, we can visualize their distribution in a dataset using a **histogram**.

::: {.panel-tabset}

### What is a histogram?

-   A graph in which a continuous variable is divided into categorical values
-   Frequencies shown in a bar graph
-   We can do this using the `geom_histogram()` function

### `geom_histogram()`

 R will automatically 'bin' a continuous variable into groups and then plot their frequency.

 It defaults to 30.

```{r}
#| echo: true
#| output-location: column

ggplot(data = attain, aes(x = age)) +
  geom_histogram(fill = "#0d467cff") +
  labs(
    title = "Age Distribution",
    x = "Age",
    y = "Frequency"
  ) + 
  theme_minimal()

```


### `bins()`

You can override `geom_histogram()`'s default by specifying the number of `bins()`. Here we set it to `100`.

``` {r}
#| echo: true
#| output-location: column

ggplot(data = attain, aes(x = age)) +
  # here we specify 20
  geom_histogram(bins = 100, fill = "#7B2C2F") +
  labs(
    title = "Age Distribution",
    x = "Age",
    y = "Frequency"
  ) + 
  theme_minimal()

```


### `binwidth()`

Alternatively, you can make the bins wider to include more observations. Here, we set the `binwidth = 50`, which makes the bins span 50 units. 

``` {r}
#| echo: true
#| output-location: column

ggplot(data = attain, aes(x = age)) +
  # here we specify 20
  geom_histogram(binwidth = 50, fill = "#4CBB17") +
  labs(
    title = "Age Distribution",
    x = "Age",
    y = "Frequency"
  ) + 
  theme_minimal()

```
:::


## Line chart: geom_line(){.smaller}

A **line chart** is similar to a bar graph but the tops of the bars are represented by points joined by lines. 

::: {.panel-tabset}

### What is a line chart

- X and Y variables are ordered in some way (ordinal, interval, ratio)
- Useful when you want to show change in a `Y` variable over your `X` variable
- May not work well with missing values
- We can do this using the `geom_line()` function

### `geom_line()`

Here's a look at unemployment rates over time. Note that if we have data where we have average values of `Y` for ordered values of `X`, we can also use line charts.

```{r}
#| echo: true
#| output-location: column

economics |> 
ggplot(aes(x = date, y = unemploy)) + 
geom_line() + 
  labs(
    title = "Employment over time",
    x = "Date",
    y = "Unemployment count"
  ) + 
  theme_minimal()

```

:::


## Scatterplot: geom_point(){.smaller}

A **scatterplot** is a two-dimensional rectangular plot for visualizing the relationship between two continuous variables.


::: {.panel-tabset}

### What is a scatterplot chart?

- **X-axis**: values of one continuous variable
- **Y-axis**: values of another continuous variable
- We can do this using the `geom_point()` function


### `geom_point()`

Let's look at the relationship between age an individual was married and the age of when their child was born. 

```{r}
#| echo: true
#| output-location: column

attain |> 
ggplot(aes(x = agewed, y = agekdbrn)) + 
geom_point() + 
  labs(
    title = "Age of marriage vs childbirth",
    x = "Age married",
    y = "Age child was born"
  ) + 
  theme_minimal()

```

:::


## Boxplot: geom_boxplot(){.smaller}

The **boxplot** compactly displays the distribution of a continuous variable. It visualises five summary statistics (the median, two hinges and two whiskers), and all "outlying" points individually.

::: {.panel-tabset}

### What is boxplot?

Most useful to see the entire distribution of a variable, by another categorical one

- Most useful looking at 2 vars, but can do one
- If you want 1, specify just one axis 
- We can do this using the `geom_boxplot()` function


### `geom_boxplot()` 1 var

We can look we are looking at the distribution of income by sex.

```{r}
#| echo: true
#| output-location: column

attain |> 
ggplot(aes(y = rincom91)) + 
geom_boxplot() + 
  labs(
    title = "Income distribution",
    x = "",
    y = "Income"
  ) + 
  theme_minimal() + 
    theme(
    axis.text.x = element_blank(),
    axis.ticks.x = element_blank()
  )

```

### `geom_boxplot()` 2 vars

In this case, we are looking at the distribution of income by sex.

```{r}
#| echo: true
#| output-location: column

attain |> 
ggplot(aes(x = sex, y = rincom91)) + 
geom_boxplot() + 
  labs(
    title = "Income by sex",
    x = "Sex",
    y = "Income"
  ) + 
  theme_minimal()

```
::: 

## Questions?

## Weekly Assignments {.smaller}

You'll be provided a `hw#.qmd` each week that you'll use as a template to complete you homework assignment. It will be available in bCourses.

-   Files → Weekly Assignments

Some weeks you'll just answer specific quetions, but in weeks that require you to use your own data, you'll approach the assignment like a research paper, which you can use to bulid into the final paper. 

Let's look at an example to better understand what I'm asking.


## Weekly Assignment #2 {.smaller}

**Assignment:**

Using a dataset of your choice, choose a research question and construct a plot that helps answer it.

**HW #2:** due Thursday, February 12, 11:59 PM
 
 - any questions?

## What type of data? {.smaller}

**We want data that will help us say something about sociological theories / social processes**

This encompasses a wide variety of data!

-   Our observations can be individuals, groups/organizations, countries
-   We will want to focus on topics that sociologists care about
-   But, fortunately for you, we care about almost everything!

**Not sure if your data source/topic is appropriate?**

Feel free to ask!

## Getting data: online repositories {.smaller}

Online repositories contain multiple datasets, and you can generally search for datasets related to your topic of interest

**Features:**

-   Some repositories need a UC Berkeley login
-   Some repositories allow you to do some data analysis on the webpage without accessing the raw data
-   **For this class**: we will want to download the raw data and work with it in R (importing it from .csv or from another data type if necessary)

## Survey Documentation and Analysis {.smaller}

**Opinion data**

-   General Social Survey
-   American National Election Studies
-   Studies on racial attitudes and prejudice
-   Surveys on household finance and health

<https://sda.berkeley.edu/archive.htm>

## Inter-university Consortium for Political and Social Research (ICPSR) {.smaller}

**Comprehensive social science data repository**

<https://www.icpsr.umich.edu/sites/icpsr/find-data>

## Association of Religion Data Archives {.smaller}

**International and US data**

-   Mostly on religion
-   Some on health/public opinion

<http://thearda.com/Archive/browse.asp>

## Integrated Public Use Microdata Series (IPUMS) {.smaller}

**Multiple data sources:**

-   Census data (US and international)
-   Current Population Survey (collects monthly information about the US labor force)
-   US and global health data
-   US time use data
-   Can pull directly using `tidycensus()` library

<https://www.ipums.org>

## Roper Center for Public Opinion Research

**Public opinion polls**

Thousands of public opinion polls dating back to the early 20th century

<https://ropercenter.cornell.edu/>

## CEIC data

**Economic data**

-   Macro- and micro-economic data

<https://www.ceicdata.com/en>

## Google Dataset Search

**Comprehensive search tool**

A newer resource that could be another good source of data

<https://datasetsearch.research.google.com/>

## U.S. government data {.smaller}

**Multiple levels of government:**

-   **Federal**: <https://www.data.gov/>
-   **State (California)**: <https://data.ca.gov/>
-   **Local (San Francisco)**: <https://datasf.org/>
-   **Local (Berkeley)**: <https://data.cityofberkeley.info/>

## Questions?